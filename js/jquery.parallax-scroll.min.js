!function(t,i){"function"==typeof define&&define.amd?define(["jquery"],i):i(t.jQuery)}(this,function(t){"use strict";var i,n={friction:.5,direction:"vertical"},o=t(window),e=0;return window.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,5-(i-e)),o=window.setTimeout(function(){t(i+n)},n);return e=i+n,o},i=function(i,e){return{init:function(){this.$background=t(i),this.settings=t.extend({},n,e),this._initStyles(),this._bindEvents()},_initStyles:function(){this.$background.css({"background-attachment":"scroll"})},_visibleInViewport:function(){var t=o.height(),i=this.$background.get(0).getBoundingClientRect();return i.top<t&&i.bottom>0||i.bottom<=t&&i.top>t},_bindEvents:function(){var t=this;o.on("load scroll resize",function(){t._requestTick()})},_requestTick:function(){var t=this;this.ticking||(this.ticking=!0,requestAnimationFrame(function(){t._updateBgPos()}))},_updateBgPos:function(){if(this._visibleInViewport()){var t=o.width(),i=o.height(),n=this.$background.data("width"),e=this.$background.data("height"),s=n/e,r=this.$background.width(),c=this.$background.height(),u=r/c,a=s>u,h=r/n,d=e*h,f=n*h,g=this.$background.offset().top,l=o.scrollTop(),b=l-g,p=i+d,k=t+f,v=b*(i/p),w=b*(t/k),m=(i-c)/2;m=0;var _=(t-r)/2;_=0;var x,$,q=a?this.settings.friction*(2*u):this.settings.friction*u;"horizontal"===this.settings.direction?(x=a?t+"px auto":"auto "+i+"px",$=_-w*q+"px 50%"):(x=a?"auto "+i+"px":t+"px auto",$="30% "+(v*q-m)+"px"),this.$background.css({"background-position":$})}this.ticking=!1}}},i.defaults=n,t.fn.parallaxScroll=function(t){return this.each(function(){new i(this,t).init()})},i});